<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Email AI</title>
  <style>
    :root {
      --bg: #0a0a0a;
      --panel: #111311;
      --card: #151a15;
      --muted: #9aa29a;
      --text: #e6f2e6;
      --accent: #6ee7b7;
      --accent2: #60a5fa;
      --danger: #f87171;
      --border: #1f2a1f;
    }
    * { box-sizing: border-box; }
    body { font-family: ui-sans-serif,system-ui,apple-system,Segoe UI,Roboto,Helvetica,Arial;
           margin:0; background:var(--bg); color:var(--text); width:360px; }
    header { padding:12px 14px; background:linear-gradient(180deg,#0f140f,#0a0a0a);
             border-bottom:1px solid var(--border); }
    header h3 { margin:0; font-size:15px; letter-spacing:.3px; }
    .bar { display:flex; gap:8px; padding:10px 12px; border-bottom:1px solid var(--border); align-items:center; }
    .seg { background:var(--panel); border:1px solid var(--border); border-radius:10px; padding:6px 8px; display:flex; gap:6px; align-items:center; }
    .seg label { font-size:11px; color:var(--muted); }
    select, button, textarea, input[type="text"] {
      background:var(--card); color:var(--text); border:1px solid var(--border); border-radius:10px;
      padding:8px 10px; font-size:12px; outline:none;
    }
    select:hover, button:hover, textarea:hover { border-color:#244224; }
    button { cursor:pointer; transition:.12s; }
    button.primary { background:#0f2a1a; border-color:#1f4d2f; }
    button.primary:hover { background:#10311e; }
    button.ghost { background:transparent; border-color:var(--border); }
    .row { display:flex; gap:10px; padding:10px 12px; }
    .col { flex:1; }
    .list { max-height:180px; overflow:auto; background:var(--panel); border:1px solid var(--border); border-radius:12px; }
    .item { padding:8px 10px; border-bottom:1px solid var(--border); cursor:pointer; }
    .item:hover { background:#0e120e; }
    .item h4 { margin:0 0 4px; font-size:12px; color:#dce9dc; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .item p { margin:0; font-size:11px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    textarea { width:100%; height:110px; resize:vertical; }
    .out { background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:8px; min-height:70px; white-space:pre-wrap; font-size:12px; }
    .tag { font-size:11px; padding:2px 8px; border-radius:999px; border:1px solid var(--border); color:var(--muted); }
    .tag.good { color:#a7f3d0; border-color:#134e4a; background:#032019; }
    .tag.neu { color:#bfdbfe; border-color:#1e3a8a; background:#0b1733; }
    .tag.bad { color:#fecaca; border-color:#7f1d1d; background:#2a0c0c; }
    .progress { height:6px; background:#0f1a12; border:1px solid var(--border); border-radius:999px; overflow:hidden; display:none; }
    .barin { height:100%; width:0%; background:linear-gradient(90deg,var(--accent),var(--accent2)); transition: width .2s; }
    .actions { display:flex; flex-wrap:wrap; gap:8px; }
  </style>
</head>
<body>
  <header><h3>Email AI Assistant</h3></header>

  <div class="bar">
    <div class="seg">
      <label>Lang</label>
      <select id="langSel">
        <option value="auto">Auto</option>
        <option value="en">EN</option>
        <option value="ko">KO</option>
      </select>
    </div>
    <div class="seg">
      <label>Summarize</label>
      <select id="modeSel">
        <option value="hybrid">Hybrid</option>
        <option value="llm">LLM (best)</option>
        <option value="fast">Fast</option>
      </select>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div class="list" id="emailList"></div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <textarea id="inputText" placeholder="Paste or select email…"></textarea>
      <div class="actions" style="margin-top:8px">
        <button id="btnSumm" class="primary">Summarize</button>
        <button id="btnSent">Sentiment</button>
        <button id="btnReply">Reply (stream)</button>
        <button id="toEN" class="ghost">Translate → EN</button>
        <button id="toKO" class="ghost">Translate → KO</button>
      </div>
      <div class="progress" id="prog"><div class="barin" id="progbar"></div></div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <h4 style="margin:6px 0;">Summary</h4>
        <span id="sentTag" class="tag">sentiment: -</span>
      </div>
      <div id="outSummary" class="out"></div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <h4 style="margin:6px 0;">Reply</h4>
      <div id="outReply" class="out"></div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>